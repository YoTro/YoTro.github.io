{% if site.mathjax.enable %}
  {% if page.layout == 'index' or page.mathjax or site.mathjax.per_page == nil or site.mathjax.per_page == false %}
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$$','$$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        },
        chtml: {
          scale: 1,  // Adjust the scale for responsive design
          matchFontHeight: true
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
        <!-- Ensure responsive behavior -->
    <style>
    .mjx-chtml.MJXc-display {
        display: block;
        max-width: 100%; /* 限制最大宽度为屏幕宽度 */
        overflow-x: auto; /* 允许水平滚动 */
        white-space: nowrap; /* 防止公式内容换行 */
        margin: 0 auto; /* 保持公式居中 */
      }
    </style>
    <script type="text/javascript" src="{{ site.mathjax.cdn }}"></script>
  {% endif %}
{% endif %}
